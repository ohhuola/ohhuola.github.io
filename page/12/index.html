<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.8.0">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Security Learning</title>
	<link rel="stylesheet" href="/css/style.css">
	
      <link rel="alternate" href="/atom.xml" title="Security Learning" type="application/atom+xml">
    
</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/archives" class="header__link">Archive</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/categories" class="header__link">Categories</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Security Learning</a></h1>
		<h2 class="header__subtitle">on own time</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">📖 <a href="/page/11">earlier posts</a> 📖</span>




	<article>
	
		<h1><a href="/2019/03/16/django1/">开发一个Django博客网站项目(一)</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2019-03-16</span><br>
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/Web-Development/">Web Development</a>
			</span><br>
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/Django/">Django</a> <a class="article__tag-link" href="/tags/python/">python</a>
			</span>
		
	</div>

	

	
		<p>需要准备的环境  python3以上</p>
<h2 id="创建一个虚拟环境-以兼容不同的Django版本"><a href="#创建一个虚拟环境-以兼容不同的Django版本" class="headerlink" title="创建一个虚拟环境(以兼容不同的Django版本)"></a>创建一个虚拟环境(以兼容不同的Django版本)</h2><ol>
<li>创建一个文件夹来专门存放Django(website)</li>
<li>安装Django<br> <code>pip3 install django</code></li>
<li>打开cmd到website中创建虚拟环境(djangoenv为虚拟环境项目名)<br> <code>cd desktop/website</code><br> <code>python -m venv djangoenv</code></li>
<li>继续输入 <code>djangoenv\Scripts\activate</code>就可以将该虚拟环境激活了<br>这是每一次使用虚拟环境都要进行的操作</li>
</ol>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4350555d9c9.png" alt="8.PNG"><figcaption class="figure__caption">8.PNG</figcaption></figure><br>以上虚拟环境就创建好了   </p>
<h2 id="创建一个Django项目"><a href="#创建一个Django项目" class="headerlink" title="创建一个Django项目"></a>创建一个Django项目</h2><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject one(项目名)</span><br></pre></td></tr></table></figure>
</code></pre><p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4359f8e7769.png" alt="9.PNG"><figcaption class="figure__caption">9.PNG</figcaption></figure></p>
<h3 id="初始化生成文件的用途"><a href="#初始化生成文件的用途" class="headerlink" title="初始化生成文件的用途"></a>初始化生成文件的用途</h3><ul>
<li>Manage.py 一个在命令行中可以调用的网站管理工具</li>
<li>one文件夹里<ul>
<li><strong>init</strong>.py 告诉Python这个文件夹是一个模块</li>
<li>settings.py one项目中一些配置</li>
<li>urls.py 网站内各个网址声明</li>
<li>usgi.py web服务器与django项目的接口</li>
</ul>
</li>
</ul>
<h2 id="新建一个一个Django-App"><a href="#新建一个一个Django-App" class="headerlink" title="新建一个一个Django App"></a>新建一个一个Django App</h2><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd one</span><br><span class="line">python manage.py startapp blog(app项目名)</span><br><span class="line">再将App添加到settings.py里</span><br></pre></td></tr></table></figure>
</code></pre><p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b435bb8cdab4.png" alt="10.PNG"><figcaption class="figure__caption">10.PNG</figcaption></figure><br>INSTALLED_APPS默认包括了一下Django自带的应用:</p>
<ul>
<li>django.contrib.admin–管理员站点</li>
<li>django.contrib.auth–认证授权系统</li>
<li>django.contrib.contenttypes–内容类型框架</li>
<li>django.contrib.sessions–会话框架</li>
<li>django.contrib.messages–消息框架</li>
<li>django.contrib.staticfiles–管理静态文件的框架</li>
</ul>
<p>默认开启的某些应用至少需要一个数据表,所以在使用他们之前要创建一些表</p>
<p><code>python manage.py migrate</code></p>
<p>这个命令是用来检查INSTALLED_APPS设置,为其中的每个应用创建需要的数据表(作用到数据库文件)</p>
<h2 id="Django的大致运行流程"><a href="#Django的大致运行流程" class="headerlink" title="Django的大致运行流程"></a>Django的大致运行流程</h2><p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b435c3078518.png" alt="11.png"><figcaption class="figure__caption">11.png</figcaption></figure></p>
<h4 id="对于不同路径的响应-一般是在urls-py–blog中修改"><a href="#对于不同路径的响应-一般是在urls-py–blog中修改" class="headerlink" title="对于不同路径的响应(一般是在urls.py–blog中修改)"></a>对于不同路径的响应(一般是在urls.py–blog中修改)</h4><p><strong>在blog文件夹下创建一个新的文件:urls.py用于处理网址的解析,同时在one文件夹下的urls.py中添加一条路径</strong><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">urls.py--one</span><br><span class="line">	path(&apos;&apos;,include(&apos;blog.urls&apos;)),</span><br></pre></td></tr></table></figure></p>
<ul>
<li>urls.py–one中要添加<code>from django.urls import path,include</code></li>
<li>urls.py–blog中添加<code>from django.urls import path</code></li>
</ul>
<p>函数include()允许引用其他的URLconfs.,他会截断与此项相匹配的URL部分,并将剩余的字符串发送到URLconf以供进一步处理.包括其他URL模式时总应该使用include(),admin.site.urls是唯一的例外.</p>
<p>函数path()具有四个参数,两个必须参数:<strong>route</strong>和<strong>view</strong>,两个可选参数: <strong>kwargs</strong>和<strong>name</strong>一般只填写两个必选参数:</p>
<blockquote>
<p>route是一个匹配URL的准则.当Django响应一个请求时,他会从urlpatterns的第一项开始,按顺序以此匹配列表中的项,直到找到匹配的项,这些准则不会匹配GET和POST参数或域名.<br>例如，URLconf 在处理请求 <code>https://www.example.com/myapp/</code> 时，它会尝试匹配 myapp/ 。处理请求 <code>https://www.example.com/myapp/?page=3</code>时，也只会尝试匹配 myapp/</p>
</blockquote>
<blockquote>
<p>path() 参数： view<br>当 Django 找到了一个匹配的准则，就会调用这个特定的视图函数，并传入一个 HttpRequest 对象作为第一个参数，被“捕获”的参数以关键字参数的形式传入。<br><strong>route参数可以有一些特定的格式来处理路径</strong></p>
</blockquote>
<ul>
<li><code>&lt;slug:blog_link&gt;--slug可以识别字符和数字</code></li>
<li><code>&lt;int:blog_id&gt;--int用于识别数字,表示这个网址是个数字存到blog_id这个变量里</code></li>
<li><code>&lt;str:blog_title&gt;--str用于识别字符串</code></li>
</ul>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4378d54cd9c.png" alt="13.png"><figcaption class="figure__caption">13.png</figcaption></figure></p>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4365c547e1a.png" alt="14.png"><figcaption class="figure__caption">14.png</figcaption></figure></p>
<p>如上图所示有一个默认的路径<code>http://127.0.0.1:8000/admin/</code></p>
<h4 id="编写模型"><a href="#编写模型" class="headerlink" title="编写模型"></a>编写模型</h4><p>模型是您的数据唯一而且准确的信息来源.它包含您正在存储的数据的重要字段和行为.一般来说,每一个模型都映射一个数据库表</p>
<ul>
<li>每个模型都是一个python类,这些类继承django.db.models.Model</li>
<li>模型类的每个属性都相当于一个数据库字段</li>
<li>综上,Django正在给你一个自动生成访问数据库的API</li>
</ul>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4385bc7a038.png" alt="19.png"><figcaption class="figure__caption">19.png</figcaption></figure></p>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4385bc7a9b4.png" alt="20.png"><figcaption class="figure__caption">20.png</figcaption></figure></p>
<p>三个关联模型是为了防止出现重复过多的问题(方便添加数据)</p>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/09/5b4385be5888d.png" alt="21.png"><figcaption class="figure__caption">21.png</figcaption></figure></p>
<p>在models.py文件中建立一个Post模型,还有与之相关联的Category,Tag模型</p>
<ul>
<li>ForeignKey()–一般用于一对多的模型</li>
<li>ManyToManyField()–一般用于多对多的模型</li>
<li>关联作者模型有现成的直接引入  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib.auth.models import User`</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><figure class="figure"><img src="https://i.loli.net/2018/07/10/5b43879f7210a.png" alt="22.png"><figcaption class="figure__caption">22.png</figcaption></figure></p>
<h5 id="然后-想要在后台直接操作这三个数据-需要现在admin-py中注册一下"><a href="#然后-想要在后台直接操作这三个数据-需要现在admin-py中注册一下" class="headerlink" title="然后,想要在后台直接操作这三个数据,需要现在admin.py中注册一下"></a>然后,想要在后台直接操作这三个数据,需要现在admin.py中注册一下</h5><p><figure class="figure"><img src="https://i.loli.net/2018/07/10/5b43879f7210a.png" alt="24.png"><figcaption class="figure__caption">24.png</figcaption></figure>    </p>
<ul>
<li><p><code>from .models import Post,Category,Tag</code>–将Post,Category,Tag从models.py中导入</p>
</li>
<li><p><code>admin.site.register</code>–进行注册</p>
</li>
</ul>
<h5 id="最后每当我们在models做了修改之后都需要执行两个操作"><a href="#最后每当我们在models做了修改之后都需要执行两个操作" class="headerlink" title="最后每当我们在models做了修改之后都需要执行两个操作"></a>最后每当我们在models做了修改之后都需要执行两个操作</h5><p> <code>python manage.py makemigrations</code><br>    <code>python manage.py migrate</code></p>
<p>第一个命令用于检测你对模型文件的修改,并且把修改的部分作为一次迁移(这是一种对于变化的存储形式)<br>第二个命令,在数据库中创建新定义的模型的数据表</p>

	

	

</article>





	<span class="different-posts">📖 <a href="/page/13">more posts</a> 📖</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>Hi there, <br>welcome to my Blog glad you found it. Have a look around, will you?</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2020 Lexie oh | Powered by <a href="https://hexo.io/">Hexo</a> | Theme <a href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
